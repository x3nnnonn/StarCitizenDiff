syntax = "proto3";

package envoy.extensions.filters.common.fault.v3;

import "envoy/type/v3/percent.proto";
import "google/protobuf/duration.proto";
import "udpa/annotations/status.proto";
import "udpa/annotations/versioning.proto";
import "validate/validate.proto";

message FaultDelay {
  oneof fault_delay_secifier {
    .google.protobuf.Duration fixed_delay = 3;
    .envoy.extensions.filters.common.fault.v3.FaultDelay.HeaderDelay header_delay = 5;
  }
  .envoy.type.v3.FractionalPercent percentage = 4;

  message HeaderDelay {
  }

  enum FaultDelayType {
    FIXED = 0;
  }
}

message FaultRateLimit {
  oneof limit_type {
    .envoy.extensions.filters.common.fault.v3.FaultRateLimit.FixedLimit fixed_limit = 1;
    .envoy.extensions.filters.common.fault.v3.FaultRateLimit.HeaderLimit header_limit = 3;
  }
  .envoy.type.v3.FractionalPercent percentage = 2;

  message FixedLimit {
    uint64 limit_kbps = 1;
  }
  message HeaderLimit {
  }
}

