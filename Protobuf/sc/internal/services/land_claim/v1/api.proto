syntax = "proto3";

package sc.internal.services.land_claim.v1;

import "sc/external/services/land_claim/v1/types.proto";
import "sc/external/services/ledger/v1/types.proto";
import "google/api/annotations.proto";
import "protoc-gen-openapiv2/options/annotations.proto";

service LandClaimService {
  rpc QueryClaims ( .sc.internal.services.land_claim.v1.QueryClaimsRequest ) returns ( .sc.internal.services.land_claim.v1.QueryClaimsResponse );
  rpc ClaimLand ( .sc.internal.services.land_claim.v1.ClaimLandRequest ) returns ( .sc.internal.services.land_claim.v1.ClaimLandResponse );
  rpc UpdateClaim ( .sc.internal.services.land_claim.v1.UpdateClaimRequest ) returns ( .sc.internal.services.land_claim.v1.UpdateClaimResponse );
  rpc DeleteClaims ( .sc.internal.services.land_claim.v1.DeleteClaimsRequest ) returns ( .sc.internal.services.land_claim.v1.DeleteClaimsResponse );
}

message ClaimLandRequest {
  uint32 location_id = 1;
  string owner_urn = 2;
  repeated .sc.external.services.land_claim.v1.Plot plots = 3;
  .sc.external.services.land_claim.v1.ClaimType type = 4;
  .sc.external.services.ledger.v1.Funds price = 5;
}

message ClaimLandResponse {
  string id = 1;
}

message SplitClaimsCommand {
  repeated .sc.internal.services.land_claim.v1.SplitClaimsCommand.SplitPlots plots_to_split = 1;

  message SplitPlots {
    repeated string plot_ids = 1;
  }
}

message MergeClaimsCommand {
  repeated string claim_ids = 1;
}

message UpdateClaimRequest {
  string claim_id = 1;
  repeated .sc.external.services.land_claim.v1.Plot modified_plots = 2;
  oneof operation {
    .sc.internal.services.land_claim.v1.MergeClaimsCommand claims_to_merge = 3;
    .sc.internal.services.land_claim.v1.SplitClaimsCommand plots_to_split = 4;
  }
}

message UpdateClaimResponse {
  repeated .sc.external.services.land_claim.v1.LandClaim claims = 1;
}

message QueryClaimsRequest {
  .sc.external.services.land_claim.v1.AreaFilter area_filter = 1;
  string owner_urn = 2;
}

message QueryClaimsResponse {
  repeated .sc.external.services.land_claim.v1.LandClaim claims = 1;
}

message DeleteClaimsRequest {
  repeated string claims_id = 1;
}

message DeleteClaimsResponse {}

